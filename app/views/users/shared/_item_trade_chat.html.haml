-# チャット機能 locals item_trade_queue, item_trade_chat
%h5.mb-3
    = t('.chat')
#item_trade_chat.overflow-auto.mb-3{"data-item_trade_detail_id": item_trade_queue.item_trade_detail.id}
    = render(partial: 'item_trade_details/item_trade_chats/balloon', collection: item_trade_chats, as: 'item_trade_chat')

#item_trade_chat_forms
    -# 画像送信用フォーム
    = form_with model: item_trade_chat, url: item_trade_detail_item_trade_chats_path(item_trade_detail_id: item_trade_chat.item_trade_detail_id), id: 'item_trade_chat_image_form' do |f|
        = f.hidden_field :item_trade_detail_id, id: ''
        = f.hidden_field :sender_is_seller, id: ''
        = f.hidden_field :message, value: nil, id: ''
        .form-group
            = f.label :image, t('.image_upload'), class: 'btn btn-outline-dark'
            = f.file_field :image, accept: 'image/*', "@change": "onFileChange($event)"
        = f.submit nil, style: 'display:none;', id: 'item_trade_chat_image_form_submit'

    -# メッセージ送信用フォーム
    = form_with model: item_trade_chat, url: item_trade_detail_item_trade_chats_path(item_trade_detail_id: item_trade_chat.item_trade_detail_id), id: 'item_trade_chat_message_form' do |f|
        = f.hidden_field :item_trade_detail_id
        = f.hidden_field :sender_is_seller
        .form-group
            = f.text_area :message, class: 'form-control', rows: '1', maxlength: '200'
        .form-group
            = f.submit t('helpers.submit.send'), class: 'btn btn-primary btn-block disabled', id: 'item_trade_chat_message_button', "@click": "onClick()"

= javascript_pack_tag 'item_trade_chat'